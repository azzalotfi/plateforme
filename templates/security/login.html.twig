{# templates/security/login.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Connexion - ServicePro{% endblock %}

{% block stylesheets %}
       <link href="{{ asset('css/register.css') }}" rel="stylesheet">
    <link href="{{ asset('css/dashboard.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
{% endblock %}

{% block body %}
{% include 'partials/header.html.twig' %}
<div class="register-container">
    
 

    <!-- MAIN -->
    <main class="main">
        <!-- LEFT SECTION -->
        <section class="left-section">
            <div class="badge">ðŸš€ Rejoignez ServicePro</div>
            <h1>Bienvenue de retour</h1>
            <p>Connectez-vous pour accÃ©der Ã  vos services professionnels</p>

            <div class="stats">
                <div class="stat-card">
                    <div class="icon">ðŸ‘¥</div>
                    <h3>5000+</h3>
                    <p>Utilisateurs actifs</p>
                </div>
                <div class="stat-card">
                    <div class="icon">ðŸ”’</div>
                    <h3>100%</h3>
                    <p>Paiement sÃ©curisÃ©</p>
                </div>
            </div>
            <img src="{{ asset('images/office.jpg') }}" alt="Bureau ServicePro" class="illustration">
        </section>

        <!-- RIGHT SECTION (FORM) -->
        <section class="form-section">
            <h2>Se connecter</h2>
            <p>Connectez-vous pour continuer</p>

            {% for message in app.flashes('error') %}
                <div class="flash-error">{{ message }}</div>
            {% endfor %}

            <form method="post" action="{{ path('app_login') }}">
                <input type="email" name="_username" placeholder="Votre email" class="input-field" required>
                <input type="password" name="_password" placeholder="Mot de passe" class="input-field" required>

                <!-- ROLE SELECT avec icÃ´nes -->

              <div class="role-select">
    <div class="role-option active" data-role="client" style="pointer-events: none; opacity: 0.6;">ðŸ‘¤ Client</div>
    <div class="role-option" data-role="prestataire" style="pointer-events: none; opacity: 0.6;">ðŸ§° Prestataire</div>
    <input type="hidden" name="_role" value="client" id="role-input">
</div>


                <button type="submit" class="submit-btn">Se connecter</button>
            </form>

            <div class="login-link">
                Pas encore de compte ? <a href="{{ path('app_register') }}">Sâ€™inscrire</a>
            </div>
        </section>
    </main>

    <!-- HELP BUTTON -->
    <button class="help-btn">?</button>
</div>
{% include 'partials/footer.html.twig' %}
<script>
    // SÃ©lection du rÃ´le (Client / Prestataire)
    const roleOptions = document.querySelectorAll('.role-option');
    const roleInput = document.getElementById('role-input');

    roleOptions.forEach(option => {
        option.addEventListener('click', () => {
            roleOptions.forEach(o => o.classList.remove('active'));
            option.classList.add('active');
            roleInput.value = option.dataset.role;
        });
    });
</script>

{% endblock %}
