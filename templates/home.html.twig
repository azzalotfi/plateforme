{% extends 'base.html.twig' %}

{% block title %}ServicePro - Plateforme N°1 en Tunisie{% endblock %}

{% block stylesheets %}
    {{ parent() }}
   
    <link href="{{ asset('css/app.css') }}" rel="stylesheet">
{% endblock %}

{% block body %}
    {% include 'partials/header.html.twig' %}

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-left">
                    <div class="badge">
                        <span class="badge-icon">⭐</span>
                        <span>Plateforme N°1 en Tunisie</span>
                    </div>
                    <h1 class="hero-title">Trouvez le prestataire parfait</h1>
                    <p class="hero-description">Connectez-vous avec des professionnels qualifiés pour tous vos besoins</p>
                    <div class="hero-buttons">
                        <a href="{{ path('services') }}" class="btn btn-gradient">Trouver un service →</a>
                   <a href="{{ path('app_register') }}" class="signup-btn">Devenir prestataire</a>
                    </div>
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-number">5000+</div>
                            <div class="stat-label">Utilisateurs actifs</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">10000+</div>
                            <div class="stat-label">Services complétés</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">4.9/5</div>
                            <div class="stat-label">Note moyenne</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">98%</div>
                            <div class="stat-label">Satisfaction client</div>
                        </div>
                    </div>
                </div>
                <div class="hero-right">
                    <div class="hero-image">
                        {# Image professionnelle - vous pouvez remplacer par votre propre image locale #}
                        <img src="https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" 
                             alt="Prestataires de services professionnels" 
                             class="hero-image-img"
                             loading="lazy">
                        {# Pour utiliser une image locale, décommentez la ligne ci-dessous et commentez celle du dessus #}
                        {# <img src="{{ asset('images/hero-image.jpg') }}" alt="Prestataires de services professionnels" class="hero-image-img"> #}
                        <div class="overlay-card">
                            <div class="overlay-icon">⭐</div>
                            <div>
                                <div class="overlay-rating">4.9/5</div>
                                <div class="overlay-text">1000+ avis vérifiés</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Why Choose Us Section -->
    <section class="why-choose-us">
        <div class="container">
            <div class="section-badge light-blue">
                <span class="badge-icon">✨</span>
                <span>Pourquoi nous choisir</span>
            </div>
            <h2 class="section-title">Pourquoi nous choisir</h2>
            <p class="section-description">Nous offrons une expérience unique pour connecter clients et prestataires de services professionnels</p>
            <div class="features">
                <div class="feature-card">
                    <div class="feature-icon green">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                    </div>
                    <h3 class="feature-title">Prestataires vérifiés</h3>
                    <p class="feature-description">Tous nos prestataires sont vérifiés et évalués</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon purple">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                        </svg>
                    </div>
                    <h3 class="feature-title">Paiement sécurisé</h3>
                    <p class="feature-description">Système de points sécurisé et transparent</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon pink">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                    </div>
                    <h3 class="feature-title">Support 24/7</h3>
                    <p class="feature-description">Notre équipe est toujours là pour vous aider</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services">
        <div class="container">
            <div class="services-header">
                <div>
                    <h2 class="section-title">Nos Services</h2>
                    <p class="section-description">Découvrez nos meilleurs professionnels</p>
                </div>
                <a href="{{ path('services') }}" class="btn btn-outline">Voir tous les services →</a>
            </div>
            <div class="services-grid-home">
                {% for service in services %}
                    <div class="service-card-full">
                        <div class="service-card-image-wrapper">
                            <img src="https://images.unsplash.com/photo-1557804506-669a67965ba0?w=800&q=80" alt="{{ service.nomService }}" class="service-card-image" loading="lazy">
                            <span class="service-category-tag">{{ service.categorie ?? 'Service' }}</span>
                        </div>
                        <div class="service-card-content">
                            <h3 class="service-card-title">{{ service.nomService }}</h3>
                            <p class="service-card-description">{{ service.description }}</p>
                            <div class="service-card-rating">
                                <svg class="star-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                                <span class="rating-value">5.0</span>
                                <span class="provider-name">ServicePro</span>
                            </div>
                            <div class="service-card-footer">
                                <span class="service-price">
                                    {% if service.prix is not null %}
                                        À partir de {{ service.prix }} TND
                                    {% else %}
                                        Prix sur demande
                                    {% endif %}
                                </span>
                                <button class="reserve-btn">Réserver</button>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <p>Aucun service pour le moment. <a href="{{ path('services_new') }}">Ajoutez votre premier service</a>.</p>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section class="how-it-works">
        <div class="container">
            <h2 class="section-title">Comment ça marche ?</h2>
            <p class="section-description">Trouvez le professionnel parfait en quelques clics</p>
            <div class="steps">
                <div class="step">
                    <div class="step-number step-purple">1</div>
                    <h3 class="step-title">Parcourez les services</h3>
                    <p class="step-description">Explorez notre catalogue de professionnels qualifiés dans différents domaines</p>
                </div>
                <div class="step-connector"></div>
                <div class="step">
                    <div class="step-number step-magenta">2</div>
                    <h3 class="step-title">Réservez en ligne</h3>
                    <p class="step-description">Choisissez votre prestataire et réservez directement sur la plateforme</p>
                </div>
                <div class="step-connector"></div>
                <div class="step">
                    <div class="step-number step-pink">3</div>
                    <h3 class="step-title">Profitez du service</h3>
                    <p class="step-description">Recevez votre service et laissez votre avis pour aider la communauté</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
        <div class="container">
            <h2 class="cta-title">Prêt à trouver le service parfait ?</h2>
            <p class="cta-description">Rejoignez des milliers d'utilisateurs satisfaits et trouvez le professionnel qu'il vous faut en quelques clics</p>
          <a href="{{ path('app_register') }}" class="signup-btn">Commencer maintenant →</a>
        </div>
    </section>

    {% include 'partials/footer.html.twig' %}

    <script>
    // I18N minimal FR/EN pour la page d'accueil
    (function () {
        const t = {
            fr: {
                badge_text: 'Plateforme N°1 en Tunisie',
                hero_title: 'Trouvez le prestataire parfait',
                hero_description: 'Connectez-vous avec des professionnels qualifiés pour tous vos besoins',
                btn_find_service: 'Trouver un service →',
                btn_become_provider: 'Devenir prestataire',
                stat_users: 'Utilisateurs actifs',
                stat_services: 'Services complétés',
                stat_rating: 'Note moyenne',
                stat_satisfaction: 'Satisfaction client',
                overlay_reviews: '1000+ avis vérifiés',
                why_choose_badge: 'Pourquoi nous choisir',
                why_choose_title: 'Pourquoi nous choisir',
                why_choose_description: 'Nous offrons une expérience unique pour connecter clients et prestataires de services professionnels',
                feature_verified: 'Prestataires vérifiés',
                feature_verified_desc: 'Tous nos prestataires sont vérifiés et évalués',
                feature_secure: 'Paiement sécurisé',
                feature_secure_desc: 'Système de points sécurisé et transparent',
                feature_support: 'Support 24/7',
                feature_support_desc: 'Notre équipe est toujours là pour vous aider',
                services_title: 'Nos Services',
                services_description: 'Découvrez nos meilleurs professionnels',
                btn_view_all: 'Voir tous les services →',
                price_from: 'À partir de',
                price_on_demand: 'Prix sur demande',
                btn_reserve: 'Réserver',
                how_it_works_title: 'Comment ça marche ?',
                how_it_works_description: 'Trouvez le professionnel parfait en quelques clics',
                step1_title: 'Parcourez les services',
                step1_desc: 'Explorez notre catalogue de professionnels qualifiés dans différents domaines',
                step2_title: 'Réservez en ligne',
                step2_desc: 'Choisissez votre prestataire et réservez directement sur la plateforme',
                step3_title: 'Profitez du service',
                step3_desc: 'Recevez votre service et laissez votre avis pour aider la communauté',
                cta_title: 'Prêt à trouver le service parfait ?',
                cta_description: 'Rejoignez des milliers d\'utilisateurs satisfaits et trouvez le professionnel qu\'il vous faut en quelques clics',
                btn_start_now: 'Commencer maintenant →'
            },
            en: {
                badge_text: 'N°1 Platform in Tunisia',
                hero_title: 'Find the perfect provider',
                hero_description: 'Connect with qualified professionals for all your needs',
                btn_find_service: 'Find a service →',
                btn_become_provider: 'Become a provider',
                stat_users: 'Active users',
                stat_services: 'Completed services',
                stat_rating: 'Average rating',
                stat_satisfaction: 'Client satisfaction',
                overlay_reviews: '1000+ verified reviews',
                why_choose_badge: 'Why choose us',
                why_choose_title: 'Why choose us',
                why_choose_description: 'We offer a unique experience to connect clients and professional service providers',
                feature_verified: 'Verified providers',
                feature_verified_desc: 'All our providers are verified and rated',
                feature_secure: 'Secure payment',
                feature_secure_desc: 'Secure and transparent points system',
                feature_support: '24/7 Support',
                feature_support_desc: 'Our team is always here to help you',
                services_title: 'Our Services',
                services_description: 'Discover our best professionals',
                btn_view_all: 'View all services →',
                price_from: 'From',
                price_on_demand: 'Price on demand',
                btn_reserve: 'Reserve',
                how_it_works_title: 'How it works?',
                how_it_works_description: 'Find the perfect professional in a few clicks',
                step1_title: 'Browse services',
                step1_desc: 'Explore our catalog of qualified professionals in different fields',
                step2_title: 'Book online',
                step2_desc: 'Choose your provider and book directly on the platform',
                step3_title: 'Enjoy the service',
                step3_desc: 'Receive your service and leave your review to help the community',
                cta_title: 'Ready to find the perfect service?',
                cta_description: 'Join thousands of satisfied users and find the professional you need in a few clicks',
                btn_start_now: 'Start now →'
            }
        };

        function applyLang(lang) {
            const dict = t[lang] || t.fr;
            
            // Hero section
            const badgeText = document.querySelector('.badge span:last-child');
            if (badgeText) badgeText.textContent = dict.badge_text;
            
            const heroTitle = document.querySelector('.hero-title');
            if (heroTitle) heroTitle.textContent = dict.hero_title;
            
            const heroDesc = document.querySelector('.hero-description');
            if (heroDesc) heroDesc.textContent = dict.hero_description;
            
            const btnFindService = document.querySelector('.hero-buttons .btn-gradient');
            if (btnFindService) btnFindService.textContent = dict.btn_find_service;
            
            const btnBecomeProvider = document.querySelector('.hero-buttons .btn-outline');
            if (btnBecomeProvider) btnBecomeProvider.textContent = dict.btn_become_provider;
            
            // Stats
            const statLabels = document.querySelectorAll('.stat-label');
            if (statLabels.length >= 4) {
                statLabels[0].textContent = dict.stat_users;
                statLabels[1].textContent = dict.stat_services;
                statLabels[2].textContent = dict.stat_rating;
                statLabels[3].textContent = dict.stat_satisfaction;
            }
            
            // Overlay
            const overlayText = document.querySelector('.overlay-text');
            if (overlayText) overlayText.textContent = dict.overlay_reviews;
            
            // Why choose us
            const whyBadge = document.querySelector('.why-choose-us .section-badge span:last-child');
            if (whyBadge) whyBadge.textContent = dict.why_choose_badge;
            
            const whyTitle = document.querySelector('.why-choose-us .section-title');
            if (whyTitle) whyTitle.textContent = dict.why_choose_title;
            
            const whyDesc = document.querySelector('.why-choose-us .section-description');
            if (whyDesc) whyDesc.textContent = dict.why_choose_description;
            
            const featureTitles = document.querySelectorAll('.feature-title');
            const featureDescs = document.querySelectorAll('.feature-description');
            if (featureTitles.length >= 3 && featureDescs.length >= 3) {
                featureTitles[0].textContent = dict.feature_verified;
                featureDescs[0].textContent = dict.feature_verified_desc;
                featureTitles[1].textContent = dict.feature_secure;
                featureDescs[1].textContent = dict.feature_secure_desc;
                featureTitles[2].textContent = dict.feature_support;
                featureDescs[2].textContent = dict.feature_support_desc;
            }
            
            // Services section
            const servicesTitle = document.querySelector('.services .section-title');
            if (servicesTitle) servicesTitle.textContent = dict.services_title;
            
            const servicesDesc = document.querySelector('.services .section-description');
            if (servicesDesc) servicesDesc.textContent = dict.services_description;
            
            const btnViewAll = document.querySelector('.services-header .btn-outline');
            if (btnViewAll) btnViewAll.textContent = dict.btn_view_all;
            
            // Service cards
            const priceFrom = document.querySelectorAll('.service-price');
            priceFrom.forEach(el => {
                const text = el.textContent;
                if (text.includes('À partir de')) {
                    const price = text.match(/(\d+)/);
                    if (price) {
                        el.innerHTML = dict.price_from + ' <span>' + price[1] + ' TND</span>';
                    }
                } else if (text.includes('Prix sur demande')) {
                    el.textContent = dict.price_on_demand;
                }
            });
            
            const reserveBtns = document.querySelectorAll('.reserve-btn');
            reserveBtns.forEach(btn => {
                if (btn.textContent.includes('Réserver')) {
                    btn.textContent = dict.btn_reserve;
                }
            });
            
            // How it works
            const howTitle = document.querySelector('.how-it-works .section-title');
            if (howTitle) howTitle.textContent = dict.how_it_works_title;
            
            const howDesc = document.querySelector('.how-it-works .section-description');
            if (howDesc) howDesc.textContent = dict.how_it_works_description;
            
            const stepTitles = document.querySelectorAll('.step-title');
            const stepDescs = document.querySelectorAll('.step-description');
            if (stepTitles.length >= 3 && stepDescs.length >= 3) {
                stepTitles[0].textContent = dict.step1_title;
                stepDescs[0].textContent = dict.step1_desc;
                stepTitles[1].textContent = dict.step2_title;
                stepDescs[1].textContent = dict.step2_desc;
                stepTitles[2].textContent = dict.step3_title;
                stepDescs[2].textContent = dict.step3_desc;
            }
            
            // CTA
            const ctaTitle = document.querySelector('.cta-title');
            if (ctaTitle) ctaTitle.textContent = dict.cta_title;
            
            const ctaDesc = document.querySelector('.cta-description');
            if (ctaDesc) ctaDesc.textContent = dict.cta_description;
            
            const btnStartNow = document.querySelector('.cta .btn-white');
            if (btnStartNow) btnStartNow.textContent = dict.btn_start_now;
            
            document.documentElement.setAttribute('lang', lang);
            localStorage.setItem('lang', lang);
        }

        // Écouter les changements du sélecteur de langue
        const langSelect = document.getElementById('langSelect');
        if (langSelect) {
            langSelect.addEventListener('change', function () {
                applyLang(this.value);
            });
        }

        // Écouter l'événement personnalisé de changement de langue
        document.addEventListener('langchange', function (e) {
            applyLang(e.detail.lang);
        });

        // Appliquer la langue au chargement
        const storedLang = localStorage.getItem('lang') || 'fr';
        applyLang(storedLang);
    })();
    </script>
{% endblock %}

